<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Manip (read-dwarf.Isla.Manip)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">read-dwarf</a> &#x00BB; <a href="../index.html">Isla</a> &#x00BB; Manip</nav><h1>Module <code>Isla.Manip</code></h1><p>This module provide generic manipulation function of isla ast</p><nav class="toc"><ul><li><a href="#trace-properties">Trace Properties</a></li><li><a href="#get-annotations">Get annotations</a></li><li><a href="#non-recursive-maps-and-iters">Non-recursive maps and iters</a></li><li><a href="#recursive-maps-and-iters">Recursive maps and iters</a></li><li><a href="#variable-substitution">Variable substitution</a></li><li><a href="#accessor-list-conversion">Accessor list conversion</a></li><li><a href="#valu-string-path-access">Valu string path access</a></li><li><a href="#trace-filtering">Trace Filtering</a></li></ul></nav></header><section><header><h2 id="trace-properties"><a href="#trace-properties" class="anchor"></a>Trace Properties</h2></header><dl><dt class="spec value" id="val-is_linear"><a href="#val-is_linear" class="anchor"></a><code><span class="keyword">val</span> is_linear : <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span> <span>&#45;&gt;</span> bool</code></dt><dd><p>Check if a trace is linear (has no branches)</p></dd></dl></section><section><header><h2 id="get-annotations"><a href="#get-annotations" class="anchor"></a>Get annotations</h2></header><dl><dt class="spec value" id="val-annot_exp"><a href="#val-annot_exp" class="anchor"></a><code><span class="keyword">val</span> annot_exp : <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Get the annotation of an expression</p></dd></dl><dl><dt class="spec value" id="val-annot_event"><a href="#val-annot_event" class="anchor"></a><code><span class="keyword">val</span> annot_event : <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.event</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p>Get the annotation of an event</p></dd></dl></section><section><header><h2 id="non-recursive-maps-and-iters"><a href="#non-recursive-maps-and-iters" class="anchor"></a>Non-recursive maps and iters</h2><p>This section is filled on demand.</p><p><code>direct_a_map_b</code> take a function <code>b -&gt; b</code> and applies it to all <code>b</code> in <code>a</code>, non-recursively. Then a new a with the same structure is formed.</p><p><code>direct_a_iter_b</code> take a function <code>b -&gt; unit</code> and applies it to all <code>b</code> in <code>a</code>, non-recursively.</p></header><dl><dt class="spec value" id="val-direct_exp_map_exp"><a href="#val-direct_exp_map_exp" class="anchor"></a><code><span class="keyword">val</span> direct_exp_map_exp : <span>(<span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span></code></dt><dt class="spec value" id="val-direct_exp_iter_exp"><a href="#val-direct_exp_iter_exp" class="anchor"></a><code><span class="keyword">val</span> direct_exp_iter_exp : <span>(<span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-direct_smt_map_exp"><a href="#val-direct_smt_map_exp" class="anchor"></a><code><span class="keyword">val</span> direct_smt_map_exp : <span>(<span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.smt</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.smt</span></code></dt><dt class="spec value" id="val-direct_event_map_exp"><a href="#val-direct_event_map_exp" class="anchor"></a><code><span class="keyword">val</span> direct_event_map_exp : <span>(<span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.event</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.event</span></code></dt><dt class="spec value" id="val-direct_event_iter_valu"><a href="#val-direct_event_iter_valu" class="anchor"></a><code><span class="keyword">val</span> direct_event_iter_valu : <span>(<a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.event</span> <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-direct_event_map_valu"><a href="#val-direct_event_map_valu" class="anchor"></a><code><span class="keyword">val</span> direct_event_map_valu : <span>(<a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.event</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.event</span></code></dt><dt class="spec value" id="val-direct_valu_iter_valu"><a href="#val-direct_valu_iter_valu" class="anchor"></a><code><span class="keyword">val</span> direct_valu_iter_valu : <span>(<a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-direct_valu_map_valu"><a href="#val-direct_valu_map_valu" class="anchor"></a><code><span class="keyword">val</span> direct_valu_map_valu : <span>(<a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu)</span> <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu</code></dt></dl></section><section><header><h2 id="recursive-maps-and-iters"><a href="#recursive-maps-and-iters" class="anchor"></a>Recursive maps and iters</h2><p>This section is filled on demand.</p><p><code>a_map_b</code> take a function <code>b -&gt; b</code> and applies it to all the <code>b</code> in <code>a</code>, and do that recursively on all b that appear directly or indirectly in a</p><p><code>a_iter_b</code> take a function <code>b -&gt; unit</code> and applies it to all the <code>b</code> in <code>a</code>, and do that recursively</p><p>Doing this when a = b is not well defined, and can be easily done using the direct version from previous section.</p><p>In case where a type is not recusive like <code>event</code>, both direct and recursive versions are the same.</p></header><dl><dt class="spec value" id="val-exp_iter_var"><a href="#val-exp_iter_var" class="anchor"></a><code><span class="keyword">val</span> exp_iter_var : <span>(int <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> unit</code></dt><dd><p>iterate a function on all the variable of an expression</p></dd></dl><dl><dt class="spec value" id="val-event_iter_valu"><a href="#val-event_iter_valu" class="anchor"></a><code><span class="keyword">val</span> event_iter_valu : <span>(<a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.event</span> <span>&#45;&gt;</span> unit</code></dt></dl></section><section><header><h2 id="variable-substitution"><a href="#variable-substitution" class="anchor"></a>Variable substitution</h2></header><dl><dt class="spec value" id="val-var_subst"><a href="#val-var_subst" class="anchor"></a><code><span class="keyword">val</span> var_subst : <span>(int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span>)</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.exp</span></code></dt><dd><p>Substitute variable with expression according to subst function</p></dd></dl></section><section><header><h2 id="accessor-list-conversion"><a href="#accessor-list-conversion" class="anchor"></a>Accessor list conversion</h2></header><dl><dt class="spec value" id="val-accessor_of_string"><a href="#val-accessor_of_string" class="anchor"></a><code><span class="keyword">val</span> accessor_of_string : string <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.accessor</code></dt><dt class="spec value" id="val-string_of_accessor"><a href="#val-string_of_accessor" class="anchor"></a><code><span class="keyword">val</span> string_of_accessor : <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.accessor <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-accessor_of_string_list"><a href="#val-accessor_of_string_list" class="anchor"></a><code><span class="keyword">val</span> accessor_of_string_list : <span>string list</span> <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.accessor_list</code></dt><dt class="spec value" id="val-string_of_accessor_list"><a href="#val-string_of_accessor_list" class="anchor"></a><code><span class="keyword">val</span> string_of_accessor_list : <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.accessor_list <span>&#45;&gt;</span> <span>string list</span></code></dt></dl></section><section><header><h2 id="valu-string-path-access"><a href="#valu-string-path-access" class="anchor"></a>Valu string path access</h2></header><dl><dt class="spec value" id="val-valu_get"><a href="#val-valu_get" class="anchor"></a><code><span class="keyword">val</span> valu_get : <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu <span>&#45;&gt;</span> <span>string list</span> <span>&#45;&gt;</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.valu</code></dt><dd><p>Follow the path in a value like A.B.C in (struct (|B| (struct (|C| ...))))</p></dd></dl></section><section><header><h2 id="trace-filtering"><a href="#trace-filtering" class="anchor"></a>Trace Filtering</h2><p>This is some basic trace filtering that remove unwanted item from the trace in various situations</p></header><dl><dt class="spec value" id="val-split_cycle"><a href="#val-split_cycle" class="anchor"></a><code><span class="keyword">val</span> split_cycle : <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span> * <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span></code></dt><dd><p>Split the trace between before and after the &quot;cycle&quot; event</p></dd></dl><dl><dt class="spec value" id="val-remove_init"><a href="#val-remove_init" class="anchor"></a><code><span class="keyword">val</span> remove_init : <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span></code></dt><dd><p>Remove all events before the &quot;cycle&quot; event, keep the SMT statements</p></dd></dl><dl><dt class="spec value" id="val-remove_ignored"><a href="#val-remove_ignored" class="anchor"></a><code><span class="keyword">val</span> remove_ignored : <span><a href="../../Utils/index.html#module-String">Utils.String</a>.t <a href="../../Utils/index.html#module-List">Utils.List</a>.t</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span> <span>&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="../../Isla__/index.html#module-Base">Isla__.Base</a>.trc</span></code></dt><dd><p>Remove all the events related to ignored registers</p></dd></dl></section></div></body></html>