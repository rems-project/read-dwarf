<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Run__Block_lib (read-dwarf.Run__Block_lib)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">read-dwarf</a> &#x00BB; Run__Block_lib</nav><h1>Module <code>Run__Block_lib</code></h1><p>This module provides a representation of a complex block of code.</p><p>The end of the block is decided by <code>endpred</code>, an arbitrary predicate on the pc. In particular if the PC is symbolic the execution is stopped anyway. This means that we either reached the top level function return or an unresolved branch table.</p><p>To generate easily end predicates, there is <a href="index.html#val-gen_endpred"><code>gen_endpred</code></a>.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = </code><code>{</code><table class="record"><tr id="type-t.runner" class="anchored"><td class="def field"><a href="#type-t.runner" class="anchor"></a><code>runner : <a href="../Run/Runner/index.html#type-t">Run.Runner.t</a>;</code></td></tr><tr id="type-t.start" class="anchored"><td class="def field"><a href="#type-t.start" class="anchor"></a><code>start : int;</code></td></tr><tr id="type-t.endpred" class="anchored"><td class="def field"><a href="#type-t.endpred" class="anchor"></a><code>endpred : <a href="../State/index.html#type-exp">State.exp</a> <span>&#45;&gt;</span> <span>string option</span>;</code></td></tr></table><code>}</code></dt><dd><p><code>endpred pc_exp</code> gives when to stop</p></dd></dl><dl><dt class="spec value" id="val-make"><a href="#val-make" class="anchor"></a><code><span class="keyword">val</span> make : <span>runner:<a href="../Run/Runner/index.html#type-t">Run.Runner.t</a></span> <span>&#45;&gt;</span> <span>start:int</span> <span>&#45;&gt;</span> <span>endpred:<span>(<a href="../State/index.html#type-exp">State.exp</a> <span>&#45;&gt;</span> <span>string option</span>)</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Build a complex block starting from <code>start</code> in <code>sym</code> and ending when <code>endpred</code> says so. <code>endpred</code> is a predicate on the symbolic PC expression</p></dd></dl><dl><dt class="spec type" id="type-label"><a href="#type-label" class="anchor"></a><code><span class="keyword">type</span> label</code><code> = </code><table class="variant"><tr id="type-label.Start" class="anchored"><td class="def constructor"><a href="#type-label.Start" class="anchor"></a><code>| </code><code><span class="constructor">Start</span></code></td><td class="doc"><p>Root node of the tree</p></td></tr><tr id="type-label.End" class="anchored"><td class="def constructor"><a href="#type-label.End" class="anchor"></a><code>| </code><code><span class="constructor">End</span> <span class="keyword">of</span> string</code></td><td class="doc"><p>Lead node of the tree, the string describe which end condition has be triggered</p></td></tr><tr id="type-label.BranchAt" class="anchored"><td class="def constructor"><a href="#type-label.BranchAt" class="anchor"></a><code>| </code><code><span class="constructor">BranchAt</span> <span class="keyword">of</span> int</code></td><td class="doc"><p>A Branching node at a given PC</p></td></tr><tr id="type-label.NormalAt" class="anchored"><td class="def constructor"><a href="#type-label.NormalAt" class="anchor"></a><code>| </code><code><span class="constructor">NormalAt</span> <span class="keyword">of</span> int</code></td><td class="doc"><p>A normal instruction at PC. Exists only if <code>every_instruction</code> is true</p></td></tr></table></dt><dd><p>The labels on tree node at the output of <a href="index.html#val-run"><code>run</code></a></p></dd></dl><dl><dt class="spec value" id="val-label_to_string"><a href="#val-label_to_string" class="anchor"></a><code><span class="keyword">val</span> label_to_string : <a href="index.html#type-label">label</a> <span>&#45;&gt;</span> string</code></dt><dt class="spec value" id="val-pp_label"><a href="#val-pp_label" class="anchor"></a><code><span class="keyword">val</span> pp_label : <a href="index.html#type-label">label</a> <span>&#45;&gt;</span> <a href="../Utils/index.html#module-Pp">Utils.Pp</a>.document</code></dt><dt class="spec value" id="val-run"><a href="#val-run" class="anchor"></a><code><span class="keyword">val</span> run : <span>?&#8288;every_instruction:bool</span> <span>&#45;&gt;</span> <span>?&#8288;relevant:<span><span>(int, <span class="type-var">'a</span>)</span> Stdlib.Hashtbl.t</span></span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../State/index.html#type-t">State.t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-label">label</a> <a href="../State/Tree/index.html#type-t">State.Tree.t</a></span></code></dt><dd><p>Run the block an return a state tree indexed by the addresses of the branches.</p><p>When <code>every_instruction</code> is true, It will make a snapshot of the state i.e a tree node at each instruction. By default it will only make a Tree node on branching points.</p><p>The output is a tree because state merging is not implemented so if we are going twice on the same PC, the whole thing will be run twice separately in two separate tree branches.</p></dd></dl><dl><dt class="spec value" id="val-gen_endpred"><a href="#val-gen_endpred" class="anchor"></a><code><span class="keyword">val</span> gen_endpred : <span>?&#8288;min:int</span> <span>&#45;&gt;</span> <span>?&#8288;max:int</span> <span>&#45;&gt;</span> <span>?&#8288;loop:int</span> <span>&#45;&gt;</span> <span>?&#8288;brks:<span>int list</span></span> <span>&#45;&gt;</span> unit <span>&#45;&gt;</span> <a href="../State/index.html#type-exp">State.exp</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p>Generic end predicate. Will stop if:</p><ul><li>pc below <code>min</code></li><li>pc above <code>max</code></li><li>pc is one of <code>brks</code></li><li>pc has be seen more than <code>loop</code></li></ul></dd></dl></div></body></html>